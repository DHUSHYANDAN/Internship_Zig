{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Navigate,Outlet}from\"react-router-dom\";import axios from\"axios\";import baseUrl from\"../URL\";import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=()=>{const[isAuthenticated,setIsAuthenticated]=useState(null);useEffect(()=>{const checkAuth=async()=>{try{await axios.get(`${baseUrl}/profile`,{withCredentials:true});// ðŸ”¥ Fix: Check token with API\nsetIsAuthenticated(true);}catch(error){setIsAuthenticated(false);}};checkAuth();},[]);if(isAuthenticated===null)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return isAuthenticated?/*#__PURE__*/_jsx(Outlet,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/signin\",replace:true});};export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useState","Navigate","Outlet","axios","baseUrl","jsx","_jsx","ProtectedRoute","isAuthenticated","setIsAuthenticated","checkAuth","get","withCredentials","error","children","to","replace"],"sources":["O:/dhushport/Internship_Zig/frontend/src/components/protectedRoutes.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Navigate, Outlet } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport baseUrl from \"../URL\";\r\n\r\n\r\nconst ProtectedRoute = () => {\r\n    const [isAuthenticated, setIsAuthenticated] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const checkAuth = async () => {\r\n            try {\r\n                await axios.get(`${baseUrl}/profile`, { withCredentials: true }); // ðŸ”¥ Fix: Check token with API\r\n                setIsAuthenticated(true);\r\n            } catch (error) {\r\n                setIsAuthenticated(false);\r\n            }\r\n        };\r\n        checkAuth();\r\n    }, []);\r\n\r\n    if (isAuthenticated === null) return <div>Loading...</div>;\r\n\r\n    return isAuthenticated ? <Outlet /> : <Navigate to=\"/signin\" replace />;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,CAAEC,MAAM,KAAQ,kBAAkB,CACnD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAG7B,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CACzB,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAE5DD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAW,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACA,KAAM,CAAAP,KAAK,CAACQ,GAAG,CAAC,GAAGP,OAAO,UAAU,CAAE,CAAEQ,eAAe,CAAE,IAAK,CAAC,CAAC,CAAE;AAClEH,kBAAkB,CAAC,IAAI,CAAC,CAC5B,CAAE,MAAOI,KAAK,CAAE,CACZJ,kBAAkB,CAAC,KAAK,CAAC,CAC7B,CACJ,CAAC,CACDC,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIF,eAAe,GAAK,IAAI,CAAE,mBAAOF,IAAA,QAAAQ,QAAA,CAAK,YAAU,CAAK,CAAC,CAE1D,MAAO,CAAAN,eAAe,cAAGF,IAAA,CAACJ,MAAM,GAAE,CAAC,cAAGI,IAAA,CAACL,QAAQ,EAACc,EAAE,CAAC,SAAS,CAACC,OAAO,MAAE,CAAC,CAC3E,CAAC,CAED,cAAe,CAAAT,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}